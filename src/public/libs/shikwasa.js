/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/shikwasa@2.1.3/dist/shikwasa.cjs.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
 "use strict";function asyncGeneratorStep(e,t,i,s,a,n,o){try{var r=e[n](o),d=r.value}catch(e){return void i(e)}r.done?t(d):Promise.resolve(d).then(s,a)}function _asyncToGenerator(e){return function(){var t=this,i=arguments;return new Promise((function(s,a){var n=e.apply(t,i);function o(e){asyncGeneratorStep(n,s,a,o,r,"next",e)}function r(e){asyncGeneratorStep(n,s,a,o,r,"throw",e)}o(void 0)}))}}var PlayerTemplate='\n  <div class="shk-player">\n    <div class="shk-bar_wrap">\n      <div class="shk-bar" aria-label="progress bar">\n        <div class="shk-bar_loaded"\n          role="progressbar"\n          aria-label="loaded progress"\n          aria-valuenow="0"\n          aria-valuemin="0"\n          aria-valuemax="1"></div>\n        <div class="shk-bar_played"\n          role="progressbar"\n          aria-label="played progress"\n          aria-valuenow="0"\n          aria-valuemin="0"\n          aria-valuemax="1">\n          <button class="shk-bar-handle"\n            role="slider"\n            aria-label="seek progress"\n            aria-valuenow="0"\n            aria-valuemin="0"\n            aria-orientation="horizontal"\n            aria-valuemax="1"></button>\n        </div>\n      </div>\n    </div>\n    <div class="shk-body">\n      <div class="shk-cover">\n        <div class="shk-img"></div>\n      </div>\n      <div class="shk-main">\n        <div class="shk-text">\n          <div class="shk-artist_wrap">\n            <span class="shk-artist"></span>\n          </div>\n          <div class="shk-title_wrap">\n            <div class="shk-title_inner">\n              <span class="shk-title"></span>\n            </div>\n          </div>\n        </div>\n        <div class="shk-controls">\n          <div class="shk-controls_basic">\n            <button class="shk-btn shk-btn_speed"\n              aria-label="toggle playback rate"\n              title="change playback rate"\n              aria-live="polite">1.0x</button>\n            <button class="shk-btn shk-btn_backward"\n              aria-label="rewind 10 seconds"\n              title="rewind 10 seconds">\n              <svg aria-hidden="true">\n                <use xlink:href="#shk-icon_backward" />\n              </svg>\n            </button>\n            <button class="shk-btn shk-btn_toggle" aria-label="toggle play and pause">\n              <svg class="shk-btn_play" aria-hidden="true">\n                <use xlink:href="#shk-icon_play" />\n              </svg>\n              <svg class="shk-btn_pause" aria-hidden="true">\n                <use xlink:href="#shk-icon_pause" />\n              </svg>\n            </button>\n            <button class="shk-btn shk-btn_forward" aria-label="forward 10 seconds" title="forward 10 seconds">\n              <svg aria-hidden="true">\n                <use xlink:href="#shk-icon_forward" />\n              </svg>\n            </button>\n            <button class="shk-btn shk-btn_more" aria-label="more controls" title="more controls">\n              <svg aria-hidden="true">\n                <use xlink:href="#shk-icon_more" />\n              </svg>\n            </button>\n          </div>\n          <div class="shk-controls_extra">\n            <button class="shk-btn shk-btn_volume" aria-label="toggle volume" title="volume">\n              <svg class="shk-btn_unmute" aria-hidden="true">\n                <use xlink:href="#shk-icon_unmute" />\n              </svg>\n              <svg class="shk-btn_mute" aria-hidden="true">\n                <use xlink:href="#shk-icon_mute" />\n              </svg>\n            </button>\n          </div>\n        </div>\n        <div class="shk-display">\n          <span class="shk-loader" aria-live="polite">\n            <span class="shk-visuallyhidden" tabindex="-1">loading</span>\n            <svg aria-hidden="true" aria-label="loading" aria-live="polite" viewbox="0 0 66 66">\n              <circle cx="33" cy="33" r="30" fill="transparent" stroke="url(#shk-gradient)" stroke-dasharray="170"\n                stroke-dashoffset="20" stroke-width="6" />\n              <lineargradient id="shk-gradient">\n                <stop offset="50%" stop-color="currentColor" />\n                <stop offset="65%" stop-color="currentColor" stop-opacity=".5" />\n                <stop offset="100%" stop-color="currentColor" stop-opacity="0" />\n              </lineargradient>\n            </svg>\n          </span>\n          <span class="shk-time">\n            <span class="shk-time_now">00:00</span><span class="shk-time_duration">00:00</span>\n          </span>\n          <div class="shk-live">live</div>\n        </div>\n      </div>\n    </div>\n  </div>\n',PlayerComp=PlayerTemplate,IconTemplate='\n  <svg class="shk-icons" xmlns="http://www.w3.org/2000/svg">\n    <symbol id="shk-icon_play" viewbox="0 0 64 64">\n      <path\n        d="M32 0a32 32 0 1 1 0 64 32 32 0 0 1 0-64zm-9 17.8c-1 0-1.7.6-1.7 1.4v25.6c0 .8.8 1.4 1.7 1.4 0 0 25-12 26.2-13.1 1-1 .3-1.9.1-2.1z" />\n    </symbol>\n\n    <symbol id="shk-icon_pause" viewbox="0 0 64 64">\n      <path fill-rule="nonzero"\n        d="M32 0a32 32 0 1 0 0 64 32 32 0 0 0 0-64zm-4 40a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V24c0-1.1.9-2 2-2h4a2 2 0 0 1 2 2v16zm16 0a2 2 0 0 1-2 2h-4a2 2 0 0 1-2-2V24c0-1.1.9-2 2-2h4a2 2 0 0 1 2 2v16z" />\n    </symbol>\n\n    <symbol id="shk-icon_download" viewbox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2">\n      <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3" />\n    </symbol>\n\n    <symbol id="shk-icon_forward" viewbox="0 0 128 139">\n      <path\n        d="M64 11v14h-.8A50 50 0 1 0 114 75h14a64 64 0 1 1-64-64zm16.9 35c6.6 0 11.8 2.7 15.6 8.3a38 38 0 0 1 5.3 21.4c0 9-1.8 16-5.3 21.3-3.8 5.6-9 8.4-15.6 8.4-6.7 0-12-2.8-15.6-8.4A38 38 0 0 1 60 75.7c0-9 1.8-16.1 5.3-21.4C69 48.7 74.2 46 80.9 46zm-32.5 1v57.1H39V58.3a32.3 32.3 0 0 1-13 7V56a34 34 0 0 0 15.4-9h7zm32.5 7c-4.6 0-7.8 2.4-9.6 7.5-1.3 3.5-2 8.2-2 14.2 0 5.9.7 10.6 2 14.1 1.8 5 5 7.6 9.6 7.6 4.5 0 7.7-2.5 9.6-7.6 1.3-3.5 1.9-8.2 1.9-14.1 0-6-.6-10.7-2-14.2-1.8-5.1-5-7.6-9.5-7.6zM64 0l48 19-48 19V0z" />\n    </symbol>\n\n    <symbol id="shk-icon_backward" viewbox="0 0 128 139">\n      <path\n        d="M64 0v11A64 64 0 1 1 0 75h14a50 50 0 1 0 50-50v13L16 19 64 0zm17 45.8c6.6 0 11.8 2.7 15.6 8.3a38 38 0 0 1 5.3 21.3c0 9-1.8 16.1-5.3 21.4a18 18 0 0 1-15.6 8.3c-6.7 0-12-2.8-15.6-8.3a38 38 0 0 1-5.3-21.4c0-9 1.8-16 5.3-21.3 3.7-5.6 8.9-8.3 15.6-8.3zm-32.4 1V104h-9.4V58.2a32.3 32.3 0 0 1-13 7v-9.4a34 34 0 0 0 15.4-9h7zm32.4 7c-4.6 0-7.8 2.5-9.6 7.6-1.3 3.4-2 8.1-2 14.1s.7 10.7 2 14.2c1.8 5 5 7.6 9.6 7.6 4.5 0 7.7-2.6 9.6-7.6 1.3-3.5 2-8.2 2-14.2s-.7-10.7-2-14.1c-2-5.1-5.1-7.6-9.6-7.6z" />\n    </symbol>\n\n    <symbol id="shk-icon_more" viewbox="0 0 64 64">\n      <path\n        d="M8 24a8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8 8 8 0 0 0-8-8zm48 0a8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8 8 8 0 0 0-8-8zm-24 0a8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8 8 8 0 0 0-8-8zm0 0" />\n    </symbol>\n\n    <symbol id="shk-icon_chapter" viewbox="0 0 64 64">\n      <path d="M60.8 55.3H18.1a3.2 3.2 0 1 1 0-6.4h42.8a3.2 3.2 0 0 1 3.1 4.9c-.7 1-1.9 1.6-3.1 1.5zm0-20.2H18.1a3.2 3.2 0 1 1 0-6.4h42.8a3.2 3.2 0 1 1 0 6.4zm0-20H18.1a3.2 3.2 0 1 1 0-6.3h42.8a3.2 3.2 0 0 1 0 6.3zM8.5 12.3a4.2 4.2 0 1 1-8.5 0 4.2 4.2 0 0 1 8.5 0zm0 19.8A4.2 4.2 0 1 1 0 32a4.2 4.2 0 0 1 8.5 0zm0 19.8a4.3 4.3 0 1 1-8.5 0 4.3 4.3 0 0 1 8.5 0zm0 0"/>\n    </symbol>\n\n    <symbol id="shk-icon_unmute" viewBox="0 0 64 66">\n      <path d="M34.3 0c1.5.1 2.6 1.4 2.9 2.8v60.3c-.3 1.4-1.4 2.7-3 2.8-.7.1-1.6-.1-2.6-.7L13.7 50H4.2a4 4 0 0 1-4.1-4V20.6c0-2.2 1.8-4 4-4.1h9.6c.7-.8 17.2-15.1 17.9-15.8 1-.6 1.9-.8 2.6-.7zm6.4 9.3a2 2 0 0 1 2.4-1.6 25.8 25.8 0 0 1 0 50.5l-.4.1a2 2 0 1 1-.4-4.1 21.7 21.7 0 0 0 0-42.5 2 2 0 0 1-1.6-2.4zm4.7 12.8a12.1 12.1 0 0 1 0 21.8 2 2 0 0 1-2.8-1c-.5-1-.1-2.2 1-2.8a8 8 0 0 0 0-14.4 2 2 0 0 1-1-2.7 2 2 0 0 1 2.8-.9zm0 0"/>\n    </symbol>\n\n    <symbol id="shk-icon_mute" viewBox="0 0 64 64">\n      <path d="M33.2 0c-.8 0-1.6.1-2.6.7l-17.4 15H4a4 4 0 0 0-4 4v24.1a4 4 0 0 0 4 4h9.2l17.4 14.5c1 .6 1.8.8 2.6.7 1.4-.1 2.5-1.4 2.8-2.6V2.7C35.7 1.4 34.6 0 33.2 0zm23.2 31.5l6.9-6.8c.7-.6 1-1.5.7-2.4-.2-.8-.9-1.5-1.8-1.7-.8-.2-1.8 0-2.4.7L53 28.1 46 21.3c-.6-.6-1.5-1-2.4-.7-.9.2-1.5.9-1.8 1.7-.2.9.1 1.8.8 2.4l6.9 6.8-7 6.8c-.8 1-.8 2.4.2 3.3.9 1 2.4 1 3.3.1l7-6.8 6.8 6.8c1 .9 2.5.8 3.4 0 1-1 1-2.4 0-3.4l-6.8-6.8zm0 0"/>\n    </symbol>\n\n    <symbol id="shk-icon_triangle" viewbox="0 0 64 64"><path d="M59 29.2L7.8.4A3.2 3.2 0 003 3.2v57.6a3.2 3.2 0 004.8 2.8L59 34.8a3.2 3.2 0 000-5.6z" /></symbol>\n    <symbol id="shk-icon_chart" viewbox="0 0 64 64"><g transform="matrix(1 0 0 -1 0 64)"><rect x="10" width="8" height="54.1" rx="3"><animate attributeName="height" begin="0s" dur="2s" values="64;55;33;5;60;23;58;33;12;14;52;64" calcMode="linear" repeatCount="indefinite"/></rect><rect x="26" width="8" height="32.8" rx="3"><animate attributeName="height" begin="0s" dur="2s" values="50;34;64;23;56;23;34;4;64;54;21;50" calcMode="linear" repeatCount="indefinite"/></rect><rect x="42" width="8" height="42.6" rx="3"><animate attributeName="height" begin="0s" dur="2s" values="30;45;13;64;56;24;45;64;34;23;64;30" calcMode="linear" repeatCount="indefinite"/></rect></g></symbol>\n    <symbol id="shk-icon_close" viewbox="0 0 16 16"><path d="M3.207 14.207a1 1 0 1 1-1.414-1.414l11-11a1 1 0 0 1 1.414 1.414zm11-1.414a1 1 0 0 1-1.414 1.414l-11-11a1 1 0 0 1 1.414-1.414z"></path></symbol>\n  </svg>\n',IconComp=IconTemplate,defaultPlayer={container:()=>document.querySelector("body"),parser:null,fixed:{type:"auto",position:"bottom"},download:!1,themeColor:"#0d6efd",theme:"auto",autoPlay:!1,muted:!1,preload:"metadata",speedOptions:[.5,.75,1,1.25,1.5],audio:null},CONFIG={fixedOptions:["auto","static","fixed"],audioOptions:{title:"Unknown Title",artist:"Unknown Artist",duration:NaN,cover:null,chapters:[],src:null,album:"",live:!1}};function secondToTime(e){e=Math.round(e);var t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60),s=Math.floor(e-3600*t-60*i);return i=i<10?"0"+i:i,s=s<10?"0"+s:s,0===t?"".concat(i,":").concat(s):"".concat(t=t<10?"0"+t:t,":").concat(i,":").concat(s)}function numToString(e){var t=parseFloat(e).toFixed(2);return"0"===t.slice(-1)?t.slice(0,-1):t}function marquee(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,s=t.offsetWidth-e.offsetWidth;if(s>0){e.setAttribute("data-overflow","");var a=t.offsetWidth/i;e.style.animationDuration="".concat(a,"s")}else e.removeAttribute("data-overflow")}function handleOptions(e){var t=Object.assign({},e);return t.audio=Object.assign({},e.audio),Object.keys(defaultPlayer).forEach((e=>{t[e]=t[e]||"boolean"==typeof t[e]?t[e]:defaultPlayer[e]})),"function"==typeof t.container&&(t.container=t.container()),CONFIG.fixedOptions.find((e=>e===t.fixed.type))||(t.fixed.type=defaultPlayer.fixed.type),Array.isArray(t.speedOptions)||(t.speedOptions=[t.speedOptions]),-1===t.speedOptions.indexOf(1)&&t.speedOptions.push(1),t.speedOptions=t.speedOptions.map((e=>parseFloat(e))).filter((e=>!isNaN(e))),t.speedOptions.length>1&&t.speedOptions.sort(((e,t)=>e-t)),t}function handleAudio(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object.assign({},e);return Object.keys(CONFIG.audioOptions).forEach((e=>{i[e]=i[e]||t[e]||CONFIG.audioOptions[e]})),i}function parseAudio(){return _parseAudio.apply(this,arguments)}function _parseAudio(){return _parseAudio=_asyncToGenerator((function*(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{tags:i}=(yield parserWrap(e.src,t))||{},s=handleParsedTags(i);return handleAudio(e,s)})),_parseAudio.apply(this,arguments)}function parserWrap(e,t){return new Promise(((i,s)=>{t.read(e,{onSuccess:i,onError:s})}))}function handleParsedTags(){var e,t,i,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{title:a,artist:n}=s;if(s.picture&&s.picture.data&&s.picture.format){var o=new Uint8Array(s.picture.data),r=new Blob([o],{type:s.picture.format});e=URL.createObjectURL(r)}return s.TLEN&&s.TLEN.data&&(i=+s.TLEN.data/1e3),s.CHAP&&s.CHAP.length&&(t=s.CHAP.filter((e=>"CHAP"===e.id)).map((e=>!!(e.data&&e.data.subFrames&&e.data.subFrames.TIT2)&&{id:e.data.id,startTime:e.data.startTime/1e3,endTime:e.data.endTime/1e3,title:e.data.subFrames.TIT2.data})).sort(((e,t)=>e.id-t.id))),{title:a,artist:n,cover:e,duration:i,chapters:t}}function createElement(e){e.tag=e.tag||"div";var t=document.createElement(e.tag);return e.className&&("string"==typeof e.className?t.classList.add(e.className):e.className.forEach((e=>{t.classList.add(e)}))),e.attrs&&Object.keys(e.attrs).forEach((i=>{t.setAttribute(i,e.attrs[i])})),e.innerHTML&&(t.innerHTML=e.innerHTML),t}function toggleAttribute(e,t){"function"!=typeof e.toggleAttribute?e.hasAttribute(t)?e.removeAttribute(t):e.setAttribute(t,""):e.toggleAttribute(t)}function applyFocusVisiblePolyfill(e,t){var i=!0,s=!1,a=null;function n(e){return!!(e&&e!==document&&"HTML"!==e.nodeName&&"BODY"!==e.nodeName&&"classList"in e&&"contains"in e.classList)}function o(e){e.classList.contains("focus-visible")||(e.classList.add("focus-visible"),e.setAttribute("data-focus-visible-added",""))}function r(){i=!1}function d(){e.addEventListener("mousemove",l),e.addEventListener("mousedown",l),e.addEventListener("mouseup",l),e.addEventListener("pointermove",l),e.addEventListener("pointerdown",l),e.addEventListener("pointerup",l),e.addEventListener("touchmove",l,!!t&&{passive:!0}),e.addEventListener("touchstart",l,!!t&&{passive:!0}),e.addEventListener("touchend",l,!!t&&{passive:!0})}function l(){var s;i=!1,e.removeEventListener("mousemove",l),e.removeEventListener("mousedown",l),e.removeEventListener("mouseup",l),e.removeEventListener("pointermove",s),e.removeEventListener("pointerdown",l),e.removeEventListener("pointerup",l),e.removeEventListener("touchmove",l,!!t&&{passive:!0}),e.removeEventListener("touchstart",l,!!t&&{passive:!0}),e.removeEventListener("touchend",l,!!t&&{passive:!0})}e.addEventListener("keydown",(function(t){t.metaKey||t.altKey||t.ctrlKey||(n(document.activeElement)&&e.contains(document.activeElement)&&o(document.activeElement),i=!0)}),!0),e.addEventListener("mousedown",r,!0),e.addEventListener("pointerdown",r,!0),e.addEventListener("touchstart",r,!t||{passive:!0,capture:!0}),e.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&(s&&(i=!0),d())}),!0),d(),e.addEventListener("focus",(function(e){n(e.target)&&i&&o(e.target)}),!0),e.addEventListener("blur",(function(e){var t;n(e.target)&&(e.target.classList.contains("focus-visible")||e.target.hasAttribute("data-focus-visible-added"))&&(s=!0,window.clearTimeout(a),a=window.setTimeout((function(){s=!1}),100),(t=e.target).hasAttribute("data-focus-visible-added")&&(t.classList.remove("focus-visible"),t.removeAttribute("data-focus-visible-added")))}),!0),e.classList.add("js-focus-visible")}var resize,coverUrl=null,cooldown=!0;class UI{constructor(e){this.mounted=!1,this.icons=createElement({className:"shk-icons",innerHTML:IconComp}),this.initEl(),this.initOptions(e)}initEl(){var e=this;return _asyncToGenerator((function*(){e.el=createElement({className:["shk","shikwasa"],attrs:{"data-name":"shikwasa"},innerHTML:PlayerComp}),e.playBtn=e.el.querySelector(".shk-btn_toggle"),e.fwdBtn=e.el.querySelector(".shk-btn_forward"),e.bwdBtn=e.el.querySelector(".shk-btn_backward"),e.speedBtn=e.el.querySelector(".shk-btn_speed"),e.moreBtn=e.el.querySelector(".shk-btn_more"),e.muteBtn=e.el.querySelector(".shk-btn_volume"),e.extraControls=e.el.querySelector(".shk-controls_extra"),e.texts=e.el.querySelector(".shk-text"),e.artist=e.el.querySelector(".shk-artist"),e.artistWrap=e.el.querySelector(".shk-artist_wrap"),e.titleWrap=e.el.querySelector(".shk-title_wrap"),e.titleInner=e.el.querySelector(".shk-title_inner"),e.title=e.el.querySelector(".shk-title"),e.currentTime=e.el.querySelector(".shk-time_now"),e.duration=e.el.querySelector(".shk-time_duration"),e.bar=e.el.querySelector(".shk-bar"),e.barWrap=e.el.querySelector(".shk-bar_wrap"),e.audioPlayed=e.el.querySelector(".shk-bar_played"),e.audioLoaded=e.el.querySelector(".shk-bar_loaded"),e.handle=e.el.querySelector(".shk-bar-handle"),e.cover=e.el.querySelector(".shk-cover"),e.seekControls=[e.fwdBtn,e.bwdBtn,e.handle]}))()}initOptions(e){this.el.style="--color-primary: ".concat(e.themeColor),this.el.setAttribute("data-theme",e.theme),e.download&&e.audio&&e.audio.src&&(this.downloadBtn=createElement({tag:"a",className:["shk-btn","shk-btn_download"],attrs:{title:"download","aria-label":"download",href:"string"==typeof e.download?e.download:e.audio.src,download:"",target:"_blank",rel:"noopener noreferrer"},innerHTML:'\n          <svg aria-hidden="true">\n            <use xlink:href="#shk-icon_download" />\n          </svg>\n        '}),this.extraControls.append(this.downloadBtn)),this.el.setAttribute("data-fixed-type",e.fixed.type),"static"!==e.fixed.type&&"top"===e.fixed.position&&this.el.setAttribute("data-fixed-pos",e.fixed.position);var t=e.autoPlay?"playing":"paused";this.el.setAttribute("data-play",t),e.muted&&this.el.setAttribute("data-mute","")}initEvents(e){this.moreBtn.addEventListener("click",(()=>{toggleAttribute(this.el,"data-extra")})),Array.from(this.extraControls.children).forEach((e=>{this.hideExtraControl(e)})),applyFocusVisiblePolyfill(this.el,e),resize=()=>{cooldown&&(cooldown=!1,setTimeout((()=>cooldown=!0),100),marquee.call(this,this.titleWrap,this.title))},window.addEventListener("resize",resize)}setAudioInfo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};coverUrl&&(URL.revokeObjectURL(coverUrl),coverUrl=null),/blob/.test(e.cover)&&(coverUrl=e.cover),e.cover?this.cover.style.backgroundImage="url(".concat(e.cover,")"):this.cover.style.backgroundImage="none",this.title.innerHTML=e.title,this.titleInner.setAttribute("data-title",e.title),this.artist.innerHTML=e.artist,e.duration&&(this.duration.innerHTML=secondToTime(e.duration)),this.downloadBtn&&(this.downloadBtn.href=e.src),this.setBar("loaded",0),this.setLive(e.live),marquee(this.titleWrap,this.title)}setPlaying(){this.el.setAttribute("data-play","playing")}setPaused(){this.el.setAttribute("data-play","paused"),this.el.removeAttribute("data-loading")}setTime(e,t){this[e].innerHTML=secondToTime(t)}setBar(e,t){var i="audio"+e.charAt(0).toUpperCase()+e.substr(1);t=Math.min(t,1),t=Math.max(t,0),this[i].style.width=100*t+"%";var s=t.toFixed(2);this[i].setAttribute("aria-valuenow",s),this.handle.setAttribute("aria-valuenow",s)}setProgress(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e&&!t?t=i?e/i:0:e=t*(i||0),this.setTime("currentTime",e),this.setBar("played",t)}setSpeed(e){this.speedBtn.innerHTML=numToString(e)+"x"}setLive(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.el.setAttribute("data-live",""):this.el.removeAttribute("data-live")}getPercentByPos(e){var t=((e.clientX||e.changedTouches&&e.changedTouches[0].clientX||0)-this.barWrap.getBoundingClientRect().left)/this.barWrap.clientWidth;return t=Math.min(t,1),t=Math.max(0,t)}hideExtraControl(e){e.addEventListener("click",(()=>{setTimeout((()=>{this.el.removeAttribute("data-extra")}),800)}))}mount(e,t){e.innerHTML="",e.append(this.el),this.icons&&e.append(this.icons),this.mounted=!0,this.initEvents(t),marquee(this.titleWrap,this.title)}destroy(){window.removeEventListener("resize",resize),coverUrl&&URL.revokeObjectURL(coverUrl)}}class Events{constructor(){this.audioEvents=["abort","canplay","canplaythrough","complete","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],this.playerEvents=["audioupdate","audioparse"],this.events={}}on(e,t){this.type(e)&&"function"==typeof t&&(this.events[e]||(this.events[e]=[]),this.events[e].push(t))}trigger(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.events[e]&&this.events[e].length&&this.events[e].forEach((e=>e(t)))}type(e){return-1!==this.playerEvents.indexOf(e)?"player":-1!==this.audioEvents.indexOf(e)?"audio":(console.error("Shikwasa: unknown event name: ".concat(e)),null)}}var playerArr=[],REGISTERED_COMPS=[],isMobile="undefined"!=typeof window&&/mobile/i.test(window.navigator.userAgent),dragStart=isMobile?"touchstart":"mousedown",dragMove=isMobile?"touchmove":"mousemove",dragEnd=isMobile?"touchend":"mouseup",supportsPassive=!1;if("undefined"!=typeof window)try{var opts=Object.defineProperty({},"passive",{get:function(){return supportsPassive=!0,!1}});window.addEventListener("testPassvie",null,opts),window.removeEventListener("testPassvie",null,opts)}catch(e){supportsPassive=!1}var addPassive=supportsPassive&&isMobile;class Player{constructor(e){this.id=playerArr.length,playerArr.push(this),this.comps={},this._audio={},this._hasMediaSession=!1,this._initSeek=0,this.live=!1,this._canplay=!1,this._dragging=!1,this.events=new Events,this.options=handleOptions(e),this.renderComponents(),this.initUI(this.options),this.initAudio(),this.ui.mount(this.options.container,supportsPassive)}get duration(){return this.audio&&this.audio.duration?this.audio.duration:this._audio.duration}get seekable(){return!this.live&&Boolean(this.duration)}set seekable(e){e?this.ui.seekControls.forEach((e=>{e.removeAttribute("disabled")})):this.ui.seekControls.forEach((e=>{e.setAttribute("disabled","")}))}get currentTime(){return this.audio?this.audio.currentTime:void 0}get playbackRate(){return this.audio?this.audio.playbackRate:void 0}set playbackRate(e){this.audio&&(this.audio.playbackRate=e,this.audio.defaultPlaybackRate=e)}get muted(){return this.audio?this.audio.muted:void 0}set muted(e){this.audio&&(this.audio.muted=e,this.audio.defaultMuted=e)}initUI(){this.ui=new UI(this.options),this.el=this.ui.el,this.initControlEvents(),this.initBarEvents()}initControlEvents(){this.ui.playBtn.addEventListener("click",(()=>{this.toggle()})),this.ui.muteBtn.addEventListener("click",(()=>{this.muted=!this.muted,toggleAttribute(this.el,"data-mute")})),this.ui.fwdBtn.addEventListener("click",(()=>{this.seekBySpan()})),this.ui.bwdBtn.addEventListener("click",(()=>{this.seekBySpan({forward:!1})})),this.ui.speedBtn.addEventListener("click",(()=>{var e=this.options.speedOptions.indexOf(this.playbackRate),t=this.options.speedOptions;this.playbackRate=e+1>=t.length?t[0]:t[e+1],this.ui.setSpeed(this.playbackRate)}))}initBarEvents(){var e=0,t=e=>{this.ui.setProgress(null,this.ui.getPercentByPos(e),this.duration)},i=s=>{s.preventDefault(),document.removeEventListener(dragMove,t),document.removeEventListener(dragEnd,i),e=this.ui.getPercentByPos(s)*this.duration,this.seek(e),this._dragging=!1,setTimeout((()=>this.el.removeAttribute("data-seeking")),50)};this.ui.barWrap.addEventListener(dragStart,(e=>{this.seekable&&(e.preventDefault(),this.el.setAttribute("data-seeking",""),this._dragging=!0,document.addEventListener(dragMove,t,!!addPassive&&{passive:!0}),document.addEventListener(dragEnd,i))})),this.ui.handle.addEventListener("keydown",(e=>{if(this.seekable){var t=e.key.replace("Arrow",""),i=["PageDown","PageUp"],s=["Home","End"],a=-1!==["Left","Down"].indexOf(t),n=-1!==["Right","Up"].indexOf(t),o=t===i[0],r=t===i[1],d=t===s[0],l=t===s[1];if(a||n||-1!==i.indexOf(t)||-1!==s.indexOf(t))if(d)this.seek(0);else if(l)this.seek(this.duration);else{var h=(r||o?.1:.01)*(n||r?1:-1),u=this._canplay?this.currentTime:this._initSeek,c=h*this.duration+u;this.seek(c)}}}))}initAudio(){this.options.audio.src&&(this.audio=new Audio,this.initAudioEvents(),this.events.audioEvents.forEach((e=>{this.audio.addEventListener(e,(t=>{this.events.trigger(e,t)}))})),this.audio.preload=this.options.preload,this.muted=this.options.muted,this.update(this.options.audio))}initAudioEvents(){this.on("play",(()=>{this.ui.setPlaying(),playerArr.forEach((e=>{e.id!==this.id&&e.audio&&!e.audio.paused&&e.pause()}))})),this.on("pause",(()=>{this.ui.setPaused()})),this.on("ended",(()=>{this.ui.setPaused(),this.seek(0)})),this.on("waiting",(()=>{this.el.setAttribute("data-loading","")})),this.on("durationchange",(()=>{this.duration!==1/0&&this.live&&(this.live=!1),this.duration&&1!==this.duration&&this.duration!==1/0&&(this.seekable=!0,this.ui.setTime("duration",this.duration))})),this.on("canplay",(()=>{this._canplay||(this._canplay=!0,this._initSeek&&(this.seek(this._initSeek),this._initSeek=0)),this.duration!==1/0||this.live||(this.live=!0,this.ui.setLive(this.live))})),this.on("canplaythrough",(()=>{this.el.removeAttribute("data-loading")})),this.on("progress",(()=>{if(this.audio.buffered.length){var e=this.audio.buffered.length?this.audio.buffered.end(this.audio.buffered.length-1)/this.duration:0;this.ui.setBar("loaded",e)}})),this.on("timeupdate",(()=>{this._dragging||this.ui.setProgress(this.audio.currentTime,null,this.duration)})),this.on("abort",(()=>{this.ui.setPaused()})),this.on("audioupdate",(e=>{this.seekable=e.duration&&e.duration!==1/0,this.updateMetadata(e)})),this.on("audioparse",(e=>{this.seekable=e.duration&&e.duration!==1/0,this.updateMetadata(e)}))}initMediaSession(){var e=this;if("mediaSession"in navigator){this._hasMediaSession=!0,this.setMediaMetadata(this._audio);var t={play:this.play.bind(e),pause:this.pause.bind(e),seekforward:this.seekBySpan.bind(e),seekbackward:()=>this.seekBySpan({forward:!1}),seekto:this.seek.bind(e)};Object.keys(t).forEach((e=>{navigator.mediaSession.setActionHandler(e,t[e])}))}}setMediaMetadata(e){var t=e.cover?[{src:e.cover,sizes:"150x150"}]:void 0;navigator.mediaSession.metadata=new MediaMetadata({title:e.title,artist:e.artist,album:e.album,artwork:t})}on(e,t){this.events.on(e,t)}play(){if(this.audio.paused){var e=this.audio.play();return e instanceof Promise?(e.then((()=>{this.initMediaSession()})),e.catch((e=>{"NotAllowedError"!==e.name&&"NotSupportedError"!==e.name||this.pause()}))):this.initMediaSession(),e}}pause(){this.audio.paused||this.audio.pause()}toggle(){return this.audio.paused?this.play():this.pause()}seek(e){this.seekable&&(e=parseInt(e),isNaN(e)&&console.error("Shikwasa: seeking time is NaN"),e=Math.min(e,this.duration),e=Math.max(e,0),this.ui.setProgress(e,null,this.duration),this._canplay?this.audio.currentTime=e:this._initSeek=e)}seekBySpan(){var{time:e=10,forward:t=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=(this._canplay?this.audio.currentTime:this._initSeek)+e*(t?1:-1);this.seek(i)}update(e){if(!e||!e.src)throw new Error("Shikwasa: audio source is not specified");this._audio=handleAudio(e),this.live=this._audio.live,this._canplay=!1,this.audio.src=this._audio.src,this.events.trigger("audioupdate",this._audio);var t=!(e.title&&e.artist&&e.cover&&e.chapters);!this.live&&this.options.parser&&t&&parseAudio(Object.assign({},e),this.options.parser).then((e=>{this._audio=e||this._audio,this.events.trigger("audioparse",this._audio)}))}updateMetadata(e){this.audio.title=e.title,this.ui.setAudioInfo(e),this._hasMediaSession&&this.setMediaMetadata(e)}destroyAudio(){this.audio.pause(),this.audio.src="",this.audio.load(),this.audio=null}destroy(){this.destroyAudio(),this.ui.destroy(),Object.keys(this.comps).forEach((e=>{this.comps[e].destroy&&"function"==typeof this.comps[e].destroy&&this.comps[e].destroy()})),this.comps=null,this.options.container.innerHTML=""}renderComponents(){REGISTERED_COMPS.length&&REGISTERED_COMPS.forEach((e=>{this.comps[e._name]=new e(this)}))}}Player.use=function(e){REGISTERED_COMPS.push(e)};var Shikwasa=Player;console.log("%c🍊%c Shikwasa Podcast Player v2.1.3 %c https://shikwasa.js.org","background-color:#00869B40;padding:4px;","background:#00869B80;color:#fff;padding:4px 0","padding: 2px 0;")
 //# sourceMappingURL=/sm/82386669a472cb4d5752aef3c62ccbdc8c5cb2479ff32531855f0f58e795882d.map